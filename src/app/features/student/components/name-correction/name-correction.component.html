<!-- âœ… Name Correction Modal Backdrop -->
<div class="fixed inset-0 z-[1000] flex items-center justify-center bg-black/40 px-4 py-6" role="dialog"
    aria-modal="true" aria-label="Request Certificate Name Correction">
    <!-- Modal Card -->
    <div class="w-full max-w-[450px] overflow-hidden rounded-[10px] bg-white shadow-[0_18px_50px_rgba(0,0,0,0.22)]">
        <!-- Header -->
        <div class="flex items-center justify-between px-6 py-3">
            <h2 class="text-[20px] font-bold text-[#111827]">
                Request Certificate Name Correction
            </h2>

            <a aria-label="Close" [routerLink]="['/student', parentPath, courseId, 'generate-certificate']"
                class="inline-flex h-8 w-8 items-center justify-center rounded-[8px] text-[#6B7280] hover:bg-gray-50">
                <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
            </a>

        </div>

        <!-- Body -->
        <form class="px-6 pb-6" [formGroup]="nameChangeForm" (ngSubmit)="submitNameCorrection()">
            <div class="space-y-2">
                <!-- Current Name -->
                <div>
                    <label class="block text-[12px] font-medium text-[#111827]">
                        Current Name (from registration)
                    </label>

                    <input type="text" [value]="currentUserName" readonly
                        class="mt-2 h-[44px] w-full rounded-[8px] border border-[#E5E7EB] bg-white px-4 font-semibold text-[14px] text-[#111827] focus:outline-none" />
                </div>

                <!-- Corrected Name -->
                <div>
                    <label class="block text-[12px] font-medium text-[#111827]">
                        Corrected First Name <span class="text-[#EF4444]">*</span>
                    </label>

                    <input type="text" formControlName="firstName" placeholder="Enter the correct first name" class="mt-2 h-[44px] w-full rounded-[8px] border border-[#E5E7EB] bg-white px-4 text-[13px] text-[#111827]
                   placeholder:text-[#9CA3AF] focus:border-[#D1D5DB] focus:outline-none" />
                </div>

                <div>
                    <label class="block text-[12px] font-medium text-[#111827]">
                        Corrected Last Name <span class="text-[#EF4444]">*</span>
                    </label>

                    <input type="text" formControlName="lastName" placeholder="Enter the correct last name" class="mt-2 h-[44px] w-full rounded-[8px] border border-[#E5E7EB] bg-white px-4 text-[13px] text-[#111827]
                   placeholder:text-[#9CA3AF] focus:border-[#D1D5DB] focus:outline-none" />
                </div>

                <!-- Reason -->
                <div>
                    <label class="block text-[12px] font-medium text-[#111827]">
                        Reason for Correction
                    </label>

                    <textarea rows="2" formControlName="reasonForCorrection"
                        placeholder="Enter reason for correction (optional)" class="mt-2 w-full resize-none rounded-[8px] border border-[#E5E7EB] bg-white px-4 py-2 text-[12px] leading-5 text-blue-900
                   placeholder:text-[#9CA3AF] focus:border-[#D1D5DB] focus:outline-none"></textarea>

                    <!-- Review Process -->
                    <div class="mt-2 rounded-[10px] border border-[#FDE68A] bg-[#FFFBEB] px-4 py-3">
                        <div class="flex gap-3">
                            <div
                                class="mt-[2px] inline-flex h-6 w-6 items-center justify-center rounded-full bg-[#FEF3C7]">
                                <svg class="h-4 w-4 text-[#B45309]" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                    <path d="M12 17h.01M12 10v4" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" />
                                    <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10Z"
                                        stroke="currentColor" stroke-width="2" />
                                </svg>
                            </div>

                            <div class="min-w-0">
                                <div class="text-[13px] font-semibold text-[#B45309]">Review Process</div>
                                <p class="mt-1 text-[12px] leading-5 text-[#B45309]">
                                    Correction requests will be reviewed by the admin team. You'll receive an email
                                    notification once your
                                    request is processed.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer Buttons -->
            <div class="mt-2 flex gap-3">
                <a [routerLink]="['/student', parentPath, courseId, 'generate-certificate']"
                    class="flex h-[40px] flex-1 items-center justify-center rounded-[8px] border border-[#E5E7EB] bg-white text-[13px] font-medium text-[#111827] hover:bg-gray-50">
                    Cancel
                </a>


                <button type="submit" [disabled]="nameChangeForm.invalid || isSubmitting"
                    class="h-[40px] flex-1 inline-flex items-center justify-center gap-2 rounded-[8px] bg-[#8B5CF6] text-[13px] font-semibold text-white
                 shadow-[0_10px_22px_rgba(139,92,246,0.25)] hover:bg-[#7C3AED] disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg *ngIf="!isSubmitting" class="h-4 w-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M22 2l-7 20-4-9-9-4 20-7Z" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span>{{ isSubmitting ? 'Submitting...' : 'Submit Request' }}</span>
                </button>
            </div>
        </form>
    </div>
</div>

<!-- âœ… Request Submitted Modal (show after submit) -->
@if(showRequestSubmittedModal){
<div class="fixed inset-0 z-[2000] flex items-center justify-center bg-black/40 px-4 py-6" role="dialog"
    aria-modal="true" aria-label="Request Submitted">
    <div class="w-full max-w-[450px] overflow-hidden rounded-[12px] bg-white
           shadow-[0_18px_55px_rgba(0,0,0,0.25)]">
        <!-- Header -->
        <div class="flex items-center justify-between px-6 py-4">
            <h3 class="text-[18px] font-semibold text-[#111827]">
                Request Certificate Name Correction
            </h3>

            <button type="button" (click)="closeRequestSubmitted()"
                class="inline-flex h-8 w-8 items-center justify-center rounded-[8px] text-[#6B7280] hover:bg-gray-50"
                aria-label="Close">
                <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
            </button>
        </div>

        <div class="h-px w-full bg-[#EEF2F7]"></div>

        <!-- Body -->
        <div class="px-6 pb-8 pt-10 text-center">
            <!-- Icon -->
            <div class="mx-auto flex h-[80px] w-[80px] items-center justify-center rounded-full bg-[#DCFCE7]">
                <svg class="h-8 w-8 text-[#16A34A]" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </div>

            <div class="mt-6 text-[22px] font-bold text-[#111827]">
                Request Submitted!
            </div>

            <p class="mx-auto mt-2 max-w-[350px] text-[14px] leading-6 text-[#6B7280]">
                Your name correction request has been sent to the admin team for review.
            </p>

            <!-- Info box -->
            <div class="mx-auto mt-6 max-w-[520px] rounded-[10px] border border-[#BFDBFE] bg-[#EFF6FF] px-5 py-4">
                <div class="flex justify-center gap-1 ">
                    <svg class="h-5 w-5 mt-1 text-[#2563EB]" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path d="M4 6h16v12H4z" stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        <path d="M4 8l8 5 8-5" stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                    </svg>

                    <p class="text-[14px] leading-6 text-[#1D4ED8]">
                        You'll receive an email notification once your request is processed.
                    </p>
                </div>
            </div>

            <!-- Dashboard Button -->
            <div class="mt-6">
                <a [routerLink]="['/student']"
                    class="inline-flex h-[44px] w-full items-center justify-center gap-2 rounded-[8px] bg-[#8B5CF6] text-[14px] font-semibold text-white shadow-[0_10px_22px_rgba(139,92,246,0.25)] hover:bg-[#7C3AED]">
                    <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path
                            d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span>Go to Dashboard</span>
                </a>
            </div>
        </div>
    </div>
</div>
}