<section class="mb-10 px-0">
  <!-- Filters -->
  <div class="mb-6 flex w-full flex-col gap-4 sm:flex-row sm:flex-wrap sm:items-end">
    <!-- Search -->
    <div class="flex w-full flex-col sm:w-[260px]">
      <label class="mb-1 text-gray-400 text-[14px]">Search</label>
      <div class="flex h-9 w-full items-center gap-2 border border-gray-200 bg-white px-2 shadow-sm">
        <svg class="h-4 w-4 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        <input type="text" placeholder="Search in your courses..." [(ngModel)]="searchQuery" (input)="onSearch($event)"
          class="h-full w-full flex-1 text-sm text-black placeholder-black focus:outline-none" />
      </div>
    </div>

    <!-- Category -->
    <div class="flex w-full flex-col sm:w-[170px]">
      <label class="mb-1 text-gray-400 text-[14px]">Category</label>
      <select [(ngModel)]="selectedCategory" (change)="onFilterChange()"
        class="h-9 text-[14px] w-full border border-gray-300 bg-white px-2 text-sm text-black focus:border-orange-500 focus:ring-orange-500">
        <option>All Categories</option>
        <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
      </select>
    </div>

    <!-- Course -->
    <div class="flex w-full flex-col sm:w-[170px]">
      <label class="mb-1 text-gray-400 text-[14px]">Course</label>
      <select [(ngModel)]="selectedCourse" (change)="onFilterChange()"
        class="h-9 w-full border border-gray-300 bg-white px-2 text-sm text-black focus:border-orange-500 focus:ring-orange-500">
        <option>All Courses</option>
        <option *ngFor="let course of courses_list" [value]="course">{{ course }}</option>
      </select>
    </div>

    <!-- Age Group -->
    <div class="flex w-full flex-col sm:w-[170px]">
      <label class="mb-1 text-gray-400 text-[14px]">Age Group</label>
      <select [(ngModel)]="selectedAgeGroup" (change)="onFilterChange()"
        class="h-9 w-full border border-gray-300 bg-white px-2 text-sm text-black focus:border-orange-500 focus:ring-orange-500">
        <option>All Age Group</option>
        <option *ngFor="let age of ageGroups" [value]="age">{{ age }}</option>
      </select>
    </div>

    <!-- Level -->
    <div class="flex w-full flex-col sm:w-[170px]">
      <label class="mb-1 text-gray-400 text-[14px]">Level</label>
      <select [(ngModel)]="selectedLevel" (change)="onFilterChange()"
        class="h-9 w-full border border-gray-300 bg-white px-2 text-sm text-black focus:border-orange-500 focus:ring-orange-500">
        <option>All Levels</option>
        <option *ngFor="let level of levels" [value]="level">{{ level }}</option>
      </select>
    </div>
  </div>

  <!-- Results Count -->
  <div class="mb-4 text-sm text-gray-500">
    Showing <span class="font-semibold text-gray-800">{{ courses.length }}</span>
    of <span class="font-semibold text-gray-800">{{ totalCourses }}</span> courses
  </div>

  <!-- Course Cards -->
  <div class="flex w-full flex-col gap-4 sm:flex-row sm:flex-wrap">
    <div *ngIf="loading" class="text-center py-4">Loading courses...</div>
    <div *ngIf="error" class="text-center text-red-500 py-4">{{ error }}</div>

    <!-- No results message -->
    <div *ngIf="!loading && !error && courses.length === 0" class="w-full text-center py-12">
      <div class="flex flex-col items-center gap-4">
        <svg class="w-16 h-16 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <h3 class="text-lg font-semibold text-gray-700">No Courses Found</h3>
        <p class="text-sm text-gray-500 max-w-md">
          We couldn't find any courses matching your selected filters. Please try adjusting your search criteria or
          browse all courses.
        </p>
      </div>
    </div>

    <div *ngFor="let course of courses"
      class="flex w-full flex-col overflow-hidden bg-white shadow-lg transition duration-300 hover:shadow-2xl sm:w-[calc(50%-8px)] md:w-[calc(33.333%-12px)] lg:w-[calc(20%-13px)]">
      <!-- Course Thumbnail -->
      <img [src]="course.courseThumbnail.secureUrl || 'assets/student/courseImage/CourseImages.svg'"
        alt="Course Thumbnail" class="h-28 w-full object-cover" />

      <div class="flex flex-1 flex-col justify-between">
        <!-- Course Title -->
        <div class="mt-2 border-b border-gray-200 pb-1">
          <h3 class="mx-1 text-[11px] font-medium leading-snug text-gray-900">
            {{ course.courseTitle }}
          </h3>
        </div>

        <!-- Rating, Price, Buttons (static rating) -->
        <div class="mx-2 mb-2 mt-2 flex items-center justify-between text-xs text-gray-600">
          <div class="flex items-center">
            <span class="mr-1 text-yellow-500">â˜…</span>
            <span class="mr-1 font-medium">4.8</span>
            <span>(256)</span>
          </div>

          <div class="text-primary-orange text-gray-700 flex items-center gap-2">
            <span>${{ course.coursePrice }}</span>
            <span *ngIf="course.courseEnrollementType" class="text-[10px] uppercase font-bold px-2 py-0.5 rounded-full"
              [ngClass]="course.courseEnrollementType === 'live' ? 'bg-red-100 text-red-600' : 'bg-blue-100 text-blue-600'">
              {{ course.courseEnrollementType }}
            </span>
          </div>

          <div class="flex items-center gap-2">
            <button type="button" class="transition hover:opacity-80" (click)="addToCart(course)">
              <img src="assets/student/header/favIcone.svg" alt="" class="h-4 w-4" />
            </button>
            <button type="button" class="transition hover:opacity-80" (click)="addToCart(course)">
              <img src="assets/student/header/ShoppingCartSimple.svg" alt="" class="h-4 w-4" />
            </button>
          </div>
        </div>

        <!-- View Button -->
        <a [routerLink]="['/student/view-course', course._id]"
          class="mt-2 flex w-full items-center justify-center bg-orange-500 py-2 text-sm font-semibold text-white transition hover:opacity-90 hover:bg-orange-100 hover:text-orange-600">
          <span>View</span>
        </a>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <div *ngIf="totalPages > 1" class="mt-8 flex w-full flex-wrap items-center justify-center gap-4">
    <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1"
      class="flex h-10 w-10 items-center justify-center rounded-full bg-orange-50 text-red-500 transition hover:bg-orange-100 disabled:opacity-50 disabled:cursor-not-allowed">
      <img src="assets/student/courseImage/ArrowLeft.svg" alt="Previous" />
    </button>

    <div class="flex items-center gap-3 text-sm font-medium">
      <button *ngFor="let page of pages" (click)="goToPage(page)" type="button"
        class="flex h-10 w-10 items-center justify-center rounded-full transition-all"
        [class.bg-red-500]="page === currentPage" [class.text-white]="page === currentPage"
        [class.font-semibold]="page === currentPage" [class.text-gray-800]="page !== currentPage"
        [class.hover:bg-gray-100]="page !== currentPage">
        {{ page | number: '2.0-0' }}
      </button>
    </div>

    <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages"
      class="flex h-10 w-10 items-center justify-center rounded-full bg-orange-50 text-red-500 transition hover:bg-orange-100 disabled:opacity-50 disabled:cursor-not-allowed">
      <img src="assets/student/courseImage/ArrowRight.svg" alt="Next" />
    </button>
  </div>
</section>