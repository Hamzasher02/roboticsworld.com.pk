<section class="min-h-screen bg-white">
  <div class="mx-auto flex w-full max-w-[1280px] flex-col bg-white lg:flex-row lg:rounded-[0px]
    ">
    <!-- LEFT -->
    <div class="flex w-full flex-col   pb-8  
      sm:px-6 sm:pb-10 sm:pt-6
      lg:w-1/2 lg:px-10 lg:pb-10 lg:pt-8">
      <!-- Back -->
      <a [routerLink]="['/student/view-course', course._id]" aria-label="Back"
        class="flex h-10 w-10 items-center justify-center">
        <img src="assets/student/buy course/LeftArrow.svg" alt="Back" class="h-5 w-5 object-contain" />
      </a>

      <!-- Copy -->
      <div class="mt-6 sm:mt-8 lg:mt-10">
        <h2 class="text-[15px] font-semibold text-[#111827] sm:text-[16px]">
          Ready to take the first step towards mastering your skills?
        </h2>

        <p class="mt-3 max-w-[520px] text-[13px] leading-[1.6] text-[#6B7280]
          sm:mt-4 sm:text-[15px] sm:leading-[1.55]">
          Book a free demo lesson today and experience a personalized learning journey
          tailored just for you! Whether you're looking to explore new subjects or enhance
          your existing knowledge, our expert instructors will guide you every step of the way.
          Don't miss the chance to discover the perfect course that fits your goals. Start your
          learning adventure now!
        </p>
      </div>

      <!-- Illustration -->
      <div class="mt-8 flex flex-1 items-center justify-center sm:mt-12 lg:mt-14">
        <img src="assets\student\courseDemo\courseDemo.svg" alt="Demo illustration"
          class="w-full max-w-[300px] object-contain sm:max-w-[420px] lg:max-w-[520px]" />
      </div>

    </div>

    <!-- Divider -->
    <div class="block h-px w-full bg-[#E5E7EB] lg:hidden"></div>
    <div class="hidden w-px bg-[#E5E7EB] lg:block"></div>

    <!-- RIGHT -->
    <div class="flex w-full flex-col px-4 pb-8 pt-6
      sm:px-6 sm:pb-10 sm:pt-8
      lg:w-1/2 lg:px-10 lg:pb-10 lg:pt-10">
      <!-- Heading -->
      <div class="flex flex-col items-center">
        <h1 class="text-[20px] font-bold text-black sm:text-[22px] lg:text-[24px]">
          Request a Course Demo
        </h1>

        <p class="mt-2 max-w-[520px] text-center text-[13px] leading-[1.55] text-black
          sm:text-[15px] sm:leading-[1.5]">
          Tell us about your learning interests and we'll show you exactly what to expect
        </p>

        <div class="mt-4 h-px w-full max-w-[516px] bg-[#A0A2A7]"></div>
      </div>

      <!-- Form -->
      <div class="mx-auto mt-8 flex w-full max-w-[560px] flex-col sm:mt-10">
        <!-- Select Date (Dropdown Trigger) -->
        <div class="text-[16px] font-medium text-black sm:text-[17px]">Select Date</div>

        <div class="relative mt-3">
          <button type="button" (click)="toggleCalendar()"
            class="flex h-[46px] w-full items-center justify-between rounded-[4px] border border-[#D1D5DB] bg-white px-4 text-[14px] text-gray-500 hover:border-gray-400 focus:border-[#FF6A3D] focus:outline-none">
            <span>{{ selectedDate ? (selectedDate | date:'longDate') : 'Select Date' }}</span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500 transition-transform duration-200"
              [class.rotate-180]="showCalendar" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>

          <!-- Calendar Dropdown (Absolute position to float over content if needed, or relative flow as per screenshot looks static flow) -->
          <!-- Screenshot shows it pushing content down, so relative flow is fine. -->
          <div *ngIf="showCalendar"
            class="mt-2 w-full max-w-[320px] rounded-lg border border-gray-200 bg-white p-4 shadow-lg sm:p-5 z-20 absolute top-full left-0 sm:relative sm:top-auto sm:left-auto">
            <!-- Header -->
            <div class="mb-4 flex items-center justify-between">
              <button (click)="prevMonth()" type="button"
                class="flex h-8 w-8 items-center justify-center rounded-full hover:bg-gray-100">
                <svg class="h-4 w-4 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
              </button>
              <span class="text-[14px] font-semibold text-gray-900">{{ currentMonth | date:'MMMM yyyy' }}</span>
              <button (click)="nextMonth()" type="button"
                class="flex h-8 w-8 items-center justify-center rounded-full hover:bg-gray-100">
                <svg class="h-4 w-4 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </button>
            </div>

            <!-- Days Grid -->
            <div class="grid grid-cols-7 gap-1 text-center">
              <div *ngFor="let day of weekDays" class="text-[12px] font-medium text-gray-400 py-1">
                {{ day }}
              </div>

              <button *ngFor="let date of calendarDays" type="button"
                (click)="selectDate(date); !isPastDate(date) && toggleCalendar()" [disabled]="isPastDate(date)"
                [class.text-gray-300]="!isCurrentMonth(date) || isPastDate(date)"
                [class.cursor-not-allowed]="isPastDate(date)"
                [class.text-gray-900]="isCurrentMonth(date) && !isSelected(date) && !isPastDate(date)"
                [class.bg-[#FF6A3D]]="isSelected(date)" [class.text-white]="isSelected(date)"
                [class.hover:bg-gray-100]="!isSelected(date) && !isPastDate(date)"
                class="h-8 w-8 rounded-full text-[13px] flex items-center justify-center transition-colors">
                {{ date | date:'d' }}
              </button>
            </div>
          </div>
        </div>

        <!-- Selected Date (Display Only) -->
        <div class="mt-8 text-[16px] font-medium text-black sm:text-[17px]">Selected Date</div>

        <div class="mt-3 flex items-start">
          <span class="flex h-[34px] items-center justify-center rounded-[6px] bg-[#FF6A3D] px-5
            text-[13px] font-medium text-white sm:px-6 sm:text-[14px]">
            {{ selectedDate | date:'longDate' }}
          </span>
        </div>

        <!-- Select a Time -->
        <div class="mt-8 text-[16px] font-medium text-black sm:mt-10 sm:text-[17px]">
          Select a Time
        </div>

        <!-- Time buttons (responsive) -->
        <div class="mt-4 w-full">
          <input type="time" [value]="selectedTime" (input)="onTimeChange($event)"
            class="flex h-[46px] w-full items-center justify-between rounded-[4px] border border-[#D1D5DB] bg-white px-4 text-[14px] text-gray-500 hover:border-gray-400 focus:border-[#FF6A3D] focus:outline-none sm:max-w-[320px]">
        </div>

        <!-- Slots notice -->
        <div class="mt-6 flex w-full sm:mt-8">
          <div class="w-full rounded-[6px] bg-[#E8D8E9] px-3 py-2 text-[13px] font-medium text-black sm:w-auto"
            role="status" aria-live="polite">
            Only 4 slots left for today, hurry up!
          </div>
        </div>

        <!-- Actions (responsive) -->
        <div class="mt-8 flex w-full flex-col items-stretch gap-3 sm:mt-10 sm:flex-row sm:items-center">
          <button type="button" (click)="openConfirmationModal()"
            [disabled]="!selectedDate || !selectedTime || !courseId"
            [class.bg-gray-400]="!selectedDate || !selectedTime || !courseId"
            [class.cursor-not-allowed]="!selectedDate || !selectedTime || !courseId" class="flex h-[38px] w-full items-center justify-center rounded-[4px]
            bg-[#FF6A3D] text-[14px] font-semibold text-white hover:cursor-pointer
            sm:w-[190px] transition-colors">
            Book Now
          </button>

          <a [routerLink]="['/student/course-demo-request']" class="flex h-[38px] w-full items-center justify-center rounded-[4px]
            border border-[#A0A2A7] bg-white text-[14px] font-semibold text-black
            sm:w-[190px]">
            Cancel
          </a>
        </div>

        <!-- Note -->
        <p class="mt-6 max-w-[560px] text-[13px] leading-[1.6] text-[#3E3D73] sm:mt-8 sm:text-[14px] sm:leading-[1.55]">
          Your assigned <span class="text-black">STEAM Minds</span> Instructor will be ready to guide you at the
          scheduled class time.
          Please make sure you are available when booking, as missing the class would result in valuable
          time being wasted!
        </p>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div *ngIf="showConfirmationModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4">
    <!-- Modal Card -->
    <div class="relative w-full max-w-[600px] rounded-[16px] bg-white p-6 sm:p-10 shadow-2xl">

      <!-- Close Button -->
      <button (click)="closeConfirmationModal()"
        class="absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>

      <!-- Content -->
      <div class="mt-2">
        <h3 class="text-[20px] sm:text-[22px] font-bold text-[#111827] leading-tight">
          Are you sure that you are available at the selected date & time to join the free lesson?
        </h3>

        <p class="mt-4 text-[14px] sm:text-[15px] text-[#374151] leading-relaxed">
          Your Instructor will wait for you in the class. If you don't join, their precious time will be wasted. Confirm
          only if you are sure that you will join.
        </p>
      </div>

      <!-- Actions -->
      <div class="mt-8 flex flex-col gap-3">
        <button (click)="confirmBooking()" type="button"
          class="flex h-[48px] w-full items-center justify-center rounded-[8px] bg-[#FF6A3D] text-[16px] font-bold text-white hover:bg-[#e05e36] transition-colors">
          Yes, I'll Attend
        </button>

        <button (click)="closeConfirmationModal()" type="button"
          class="flex h-[48px] w-full items-center justify-center rounded-[8px] bg-[#FFF1F2] text-[16px] font-bold text-[#111827] hover:bg-[#ffe1e4] transition-colors">
          No, I want to Change Date/ Time
        </button>
      </div>

    </div>
  </div>

  <!-- Success Modal -->
  <div *ngIf="showSuccessModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4">
    <div
      class="relative w-full max-w-[500px] rounded-[16px] bg-white p-6 sm:p-10 shadow-2xl flex flex-col items-center text-center">

      <!-- Close Button -->
      <button (click)="closeSuccessModal()"
        class="absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>

      <!-- Icon -->
      <div class="flex h-16 w-16 items-center justify-center rounded-full bg-black text-white">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
        </svg>
      </div>

      <h3 class="mt-6 text-[22px] font-bold text-[#111827]">Demo Lesson Booked!</h3>

      <p class="mt-3 text-[14px] text-[#4B5563] leading-relaxed max-w-[360px]">
        Your demo lesson has been successfully scheduled. We'll send you a confirmation email with all the details
        shortly.
      </p>

      <button (click)="closeSuccessModal()" type="button"
        class="mt-8 flex h-[48px] w-full items-center justify-center rounded-[8px] bg-[#FFF1F2] text-[16px] font-bold text-[#111827] hover:bg-[#ffe1e4] transition-colors">
        Book Another Demo
      </button>

    </div>
  </div>
</section>