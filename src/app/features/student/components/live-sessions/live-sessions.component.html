<!-- Live Sessions -->
<section class="min-h-screen bg-white">
  <div class="mx-auto w-full max-w-[1180px] px-4 pb-10 pt-6 sm:px-6">
    <!-- Header -->
    <header class="flex flex-col gap-3">
      <a aria-label="Back" [routerLink]="['/student/forum']"
        class="inline-flex h-10 w-10 items-center justify-center rounded-md text-gray-700 hover:bg-gray-50">
        <img src="assets/student/buy course/LeftArrow.svg" alt="Back" class="h-5 w-5" />
      </a>

      <h1 class="text-[22px] font-bold text-orange-500 sm:text-[24px]">
        Live Sessions
      </h1>

      <p class="text-[13px] font-medium text-gray-800 sm:text-[16px]">
        Join real-time discussions and interactive learning sessions
      </p>
    </header>

    <!-- List -->
    <div class="mt-8 space-y-6 sm:mt-10 sm:space-y-8">

      <div *ngIf="loading" class="text-center text-gray-500 py-10">Loading sessions...</div>
      <div *ngIf="!loading && sessions.length === 0" class="text-center text-gray-500 py-10">No sessions scheduled.
      </div>

      <!-- Card Template for all sessions -->
      <article *ngFor="let session of sessions"
        class="rounded-[4px] border border-gray-200 bg-white shadow-[0_2px_10px_rgba(0,0,0,0.10)]">
        <div class="flex flex-col gap-5 px-4 py-5 sm:px-6 sm:py-6 lg:flex-row lg:items-center lg:justify-between">
          <!-- Left -->
          <div class="min-w-0">
            <div class="flex items-start gap-3 sm:gap-4">
              <span class="mt-1.5 h-3.5 w-3.5 shrink-0 rounded-full"
                [ngClass]="isLive(session) ? 'bg-red-500' : 'bg-black'"></span>

              <div class="min-w-0">
                <!-- Title row -->
                <div class="flex flex-col gap-3 sm:flex-row sm:flex-wrap sm:items-center sm:gap-4">
                  <h2 class="text-[14px] font-semibold text-gray-900 sm:text-[16px]">
                    {{session.course.courseTitle}}
                  </h2>

                  <!-- Live pill -->
                  <span *ngIf="isLive(session); else upcomingPill"
                    class="relative inline-flex h-8 w-fit items-center gap-2 rounded-full bg-red-50 px-5 text-[12px] font-medium text-gray-900 overflow-hidden">
                    <span class="absolute inset-0 rounded-full bg-red-200 motion-safe:animate-pulse"
                      aria-hidden="true"></span>
                    <span class="relative z-10 h-2 w-2 rounded-full bg-black"></span>
                    <span class="relative z-10">Live</span>
                  </span>

                  <!-- Upcoming Pill -->
                  <ng-template #upcomingPill>
                    <span
                      class="inline-flex h-8 w-fit items-center rounded-full bg-[#7ECBE6] px-6 text-[12px] font-semibold text-gray-900">
                      {{session.sessionStatus | titlecase}}
                    </span>
                  </ng-template>

                  <span *ngIf="session.sessionNumber"
                    class="text-[12px] bg-gray-100 px-3 py-1 rounded text-gray-600 font-medium">
                    Session {{session.sessionNumber}} / {{session.totalSessions}}
                  </span>

                </div>

                <div class="mt-1 text-[11px] text-gray-400 sm:text-[12px]">
                  {{session.instructor ? 'with ' + session.instructor.firstName + ' ' + session.instructor.lastName :
                  ''}}
                </div>

                <p class="mt-3 text-[12px] font-semibold text-gray-900 sm:text-[14px]">
                  {{session.notes}}
                </p>

                <!-- Meta -->
                <div
                  class="mt-4 flex flex-col gap-2 text-[12px] text-gray-500 sm:flex-row sm:flex-wrap sm:items-center sm:gap-x-10 sm:gap-y-2">
                  <span class="inline-flex items-center gap-2">
                    <img src="assets/student/forum/ClockIcon.svg" alt="" class="h-4 w-4" />
                    {{session.sessionDate | date:'mediumDate'}} at {{session.startTime}} - {{session.endTime}}
                  </span>

                  <span class="inline-flex items-center gap-2" *ngIf="session.enrollment?.enrollmentType">
                    <img src="assets/student/forum/MultipleUsers.svg" alt="" class="h-4 w-4" />
                    {{session.enrollment.enrollmentType}}
                  </span>
                </div>

                <div class="mt-3 flex items-center gap-2 text-[12px] text-gray-400">
                  <img src="assets/student/forum/Lightbulb.svg" alt="" class="h-4 w-4" />
                  <span>Interactive Q&amp;A Screen sharing Chat</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Right action -->
          <div class="lg:flex lg:items-center lg:justify-end">
            <a *ngIf="session.sessionLink" [href]="session.sessionLink" target="_blank"
              class="inline-flex h-10 w-full items-center justify-center gap-3 rounded-[2px] bg-[#FF6A3D] px-8 text-[12px] font-semibold text-white shadow-[0_2px_8px_rgba(0,0,0,0.10)] hover:bg-[#F15E33] focus:outline-none focus:ring-4 focus:ring-[#FF6A3D]/20 sm:w-auto">
              Join Now
              <img src="assets/student/forum/VideoCameraWhite.svg" alt="" class="h-4 w-4" />
            </a>
            <button *ngIf="!session.sessionLink && !isLive(session)" type="button"
              class="group inline-flex h-10 w-full items-center justify-center gap-3 rounded-[2px] bg-[#F3F4F6] px-8 text-[12px] font-semibold text-gray-900 shadow-[0_2px_8px_rgba(0,0,0,0.10)] hover:bg-orange-100 hover:text-orange-500 focus:outline-none focus:ring-4 focus:ring-gray-100 sm:w-auto">
              Set Reminder
              <img src="assets/student/dashboard/VideoPlayButtonIcone.svg" alt="" class="h-4 w-4 group-hover:hidden" />
              <img src="assets/student/courseDemo/VideoCamera.svg" alt="" class="hidden h-4 w-4 group-hover:block" />
            </button>
          </div>
        </div>
      </article>
    </div>
  </div>
</section>