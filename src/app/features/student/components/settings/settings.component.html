<!-- Account Settings Page -->
<div class="min-h-screen bg-white">
    <div class="mx-auto max-w-6xl px-0 py-0 sm:px-6 sm:mb-10">
        <div class="mx-auto max-w-6xl pl-0 pr-0 sm:pl-6 md:pl-10 lg:pl-30">

            <!-- ACCOUNT SETTING -->
            <section aria-labelledby="account-setting-title">
                <h2 id="account-setting-title" class="text-[22px] font-semibold">
                    Account Setting
                </h2>

                <div class="mt-4 grid gap-6 lg:grid-cols-[260px_1fr]">
                    <!-- Left: Photo card -->
                    <div class="rounded-[2px] border border-gray-200 bg-white p-0 sm:p-4">
                        <div class="flex flex-col items-center">
                            <div class="w-full border border-gray-200 bg-white p-0 sm:p-3">
                                <div class="mx-auto w-full max-w-[220px]">
                                    <div class="relative overflow-hidden border border-gray-200 bg-gray-100">
                                        <!-- Bind Image Source -->
                                        <img [src]="filePreview || 'assets/student/settings/userProfile.svg'"
                                            alt="Profile photo" class="h-[200px] w-full object-cover" />

                                        <button type="button" (click)="onUploadClick()" class="absolute bottom-0 left-0 flex w-full items-center justify-center gap-2
                                                   bg-black/60 py-2.5 text-[13px] font-semibold text-white
                                                   hover:bg-black/70">
                                            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none">
                                                <path d="M12 16V4m0 0 4 4M12 4 8 8" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                                <path d="M4 16v3a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-3"
                                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                    stroke-linejoin="round" />
                                            </svg>
                                            Upload Photo
                                        </button>
                                        <!-- Hidden Input -->
                                        <input type="file" id="fileInput" class="hidden"
                                            (change)="onFileSelected($event)" accept="image/*">
                                    </div>
                                </div>
                            </div>

                            <p class="mt-4 text-center text-[12px] leading-5 text-gray-500">
                                Image size should be under 1MB and<br />
                                image ratio needs to be 1:1
                            </p>
                        </div>
                    </div>

                    <!-- Right: Form -->
                    <form class="rounded-[2px] bg-white" aria-label="Account setting form"
                        (ngSubmit)="saveProfileChanges()">
                        <div class="grid gap-4 lg:grid-cols-2">
                            <!-- <div>
                                <label class="block text-[14px] font-semibold">Father Name</label>
                                <input type="text" placeholder="Father Name"
                                    class="mt-2 h-9 w-full rounded-[2px] border border-gray-300 px-3 text-[12px]" />
                            </div> -->

                            <div>
                                <label class="block text-[14px] font-semibold">Father Phone Number</label>
                                <input type="text" name="parentPhoneNumber" [(ngModel)]="personal.parentPhoneNumber"
                                    placeholder="Father Phone Number"
                                    class="mt-2 h-9 w-full rounded-[2px] border border-gray-300 px-3 text-[12px]" />
                            </div>

                            <div>
                                <label class="block text-[14px] font-semibold">Phone Number</label>
                                <input type="text" name="phoneNumber" [(ngModel)]="personal.phoneNumber"
                                    placeholder="Phone Number"
                                    class="mt-2 h-9 w-full rounded-[2px] border border-gray-300 px-3 text-[12px]" />
                            </div>

                            <div>
                                <label class="block text-[14px] font-semibold">Grade</label>
                                <input type="text" name="grade" [(ngModel)]="personal.grade" placeholder="Grade"
                                    class="mt-2 h-9 w-full rounded-[2px] border border-gray-300 px-3 text-[12px]" />
                            </div>

                            <!-- <div>
                                <label class="block text-[14px] font-semibold">Age Group</label>
                                <div class="relative mt-2">
                                    <select
                                        class="h-9 w-full appearance-none text-gray-400 rounded-[2px] border border-gray-300 px-3 pr-10 text-[12px]">
                                        <option selected>Age Group</option>
                                        <option>10 - 15</option>
                                        <option>16 - 20</option>
                                        <option>21 - 30</option>
                                        <option>31+</option>
                                    </select>
                                </div>
                            </div> -->

                            <div class="lg:col-span-2">
                                <label class="block text-[14px] font-semibold">Bio</label>
                                <input type="text" name="bio" [(ngModel)]="personal.bio" placeholder="Bio"
                                    class="mt-2 h-9 w-full rounded-[2px] border border-gray-300 px-3 text-[12px]" />
                            </div>

                            <div class="lg:col-span-2">
                                <div class="flex justify-end">
                                    <button type="submit" [disabled]="isProfileSubmitting"
                                        class="mt-2 h-9 w-[150px] rounded-[2px] bg-orange-500 text-[12px] font-semibold text-white disabled:opacity-70">
                                        {{ isProfileSubmitting ? 'Saving...' : 'Save Changes' }}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </section>

            <!-- CHANGE PASSWORD -->
            <section class="mt-10">
                <h2 class="text-[18px] font-semibold">Change Password</h2>

                <form class="mt-4 max-w-3xl" (ngSubmit)="onChangePassword()">
                    <div class="mt-4">
                        <label class="block text-[14px] font-semibold">Current Password</label>
                        <div class="relative mt-2 flex items-center">
                            <input [type]="showCurrentPassword ? 'text' : 'password'" name="currentPassword"
                                [(ngModel)]="currentPassword" placeholder="Current Password"
                                class="h-9 w-full rounded-[2px] border border-gray-300 px-3 pr-10 text-[12px] focus:outline-none" />

                            <!-- Eye Icon -->
                            <button type="button" (click)="toggleVisibility('current')"
                                class="absolute right-3 flex h-5 w-5 items-center justify-center text-gray-400 hover:text-gray-600"
                                aria-label="Toggle password visibility">
                                <img [src]="showCurrentPassword ? 'assets/student/settings/Eye.svg' : 'assets/student/settings/Eye.svg'"
                                    alt="Toggle password visibility" class="h-4 w-4"
                                    [class.opacity-50]="!showCurrentPassword" />
                            </button>
                        </div>
                    </div>

                    <div class="mt-4">
                        <label class="block text-[14px] font-semibold">New Password</label>
                        <div class="relative mt-2 flex items-center">
                            <input [type]="showNewPassword ? 'text' : 'password'" name="newPassword"
                                [(ngModel)]="newPassword" placeholder="New Password"
                                class="h-9 w-full rounded-[2px] border border-gray-300 px-3 pr-10 text-[12px] focus:outline-none" />

                            <!-- Eye Icon -->
                            <button type="button" (click)="toggleVisibility('new')"
                                class="absolute right-3 flex h-5 w-5 items-center justify-center text-gray-400 hover:text-gray-600"
                                aria-label="Toggle password visibility">
                                <img [src]="showNewPassword ? 'assets/student/settings/Eye.svg' : 'assets/student/settings/Eye.svg'"
                                    alt="Toggle password visibility" class="h-4 w-4"
                                    [class.opacity-50]="!showNewPassword" />
                            </button>
                        </div>
                    </div>

                    <div class="mt-4">
                        <label class="block text-[14px] font-semibold">
                            Confirm New Password
                        </label>

                        <div class="relative mt-2 flex items-center">
                            <input [type]="showConfirmNewPassword ? 'text' : 'password'" name="confirmNewPassword"
                                [(ngModel)]="confirmNewPassword" placeholder="Confirm New Password"
                                class="h-9 w-full rounded-[2px] border border-gray-300 px-3 pr-10 text-[12px] focus:outline-none" />

                            <!-- Eye Icon -->
                            <button type="button" (click)="toggleVisibility('confirm')"
                                class="absolute right-3 flex h-5 w-5 items-center justify-center text-gray-400 hover:text-gray-600"
                                aria-label="Toggle password visibility">
                                <img [src]="showConfirmNewPassword ? 'assets/student/settings/Eye.svg' : 'assets/student/settings/Eye.svg'"
                                    alt="Toggle password visibility" class="h-4 w-4"
                                    [class.opacity-50]="!showConfirmNewPassword" />
                            </button>
                        </div>
                    </div>

                    <button type="submit" [disabled]="isSubmitting"
                        class="mt-6 h-9 w-[170px] rounded-[2px] bg-orange-500 text-[13px] font-semibold text-white disabled:opacity-50 disabled:cursor-not-allowed">
                        {{ isSubmitting ? 'Changing...' : 'Change Password' }}
                    </button>
                </form>
            </section>

        </div>
    </div>
</div>