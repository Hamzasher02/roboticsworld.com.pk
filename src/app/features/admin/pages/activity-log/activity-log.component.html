<section class="min-h-screen w-full bg-[#F7F8FA] p-3 sm:p-4">
  <div class="mx-auto flex w-full max-w-[1180px] flex-col rounded-[8px] bg-white px-3 py-4 sm:px-6 sm:py-6">
    <!-- Top row -->
    <div class="flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
      <div class="flex items-center gap-3">
        <h1 class="text-[20px] font-semibold text-[#374151]">
          {{ title }}
        </h1>

        <!-- Period dropdown (functional) -->
        <div class="relative">
          <select [(ngModel)]="period" (ngModelChange)="onPeriodChange($event)"
            class="h-[28px] w-[110px] cursor-pointer appearance-none rounded-full border border-[#D1D5DB] bg-white px-4 pr-8 text-[12px] font-medium text-[#374151] outline-none"
            aria-label="Period">
            <option value="Daily">Daily</option>
            <option value="Weekly">Weekly</option>
            <option value="Monthly">Monthly</option>
          </select>

          <span class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-[#6B7280]">
            <svg width="12" height="12" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd"
                d="M5.23 7.21a.75.75 0 0 1 1.06.02L10 10.94l3.71-3.71a.75.75 0 1 1 1.06 1.06l-4.24 4.24a.75.75 0 0 1-1.06 0L5.21 8.29a.75.75 0 0 1 .02-1.08Z"
                clip-rule="evenodd" />
            </svg>
          </span>
        </div>
      </div>

      <div class="text-[14px] font-medium text-[#6B7280] sm:text-right">
        {{ dateRangeText }}
      </div>
    </div>

    <!-- Divider -->
    <div class="mt-3 h-px w-full bg-[#E5E7EB]"></div>

    <!-- Search + Filters -->
    <div class="mt-3 flex w-full flex-col gap-2 lg:flex-row lg:items-center lg:justify-between">
      <!-- Search -->
      <div class="relative flex w-full lg:w-auto">
        <input [(ngModel)]="search" (ngModelChange)="applyFilter()" type="text"
          class="h-[32px] w-full rounded-full border border-[#D1D5DB] bg-white px-4 pr-10 text-[12px] font-medium text-[#374151] placeholder:text-[#9CA3AF] outline-none lg:w-[520px] xl:w-[600px]"
          placeholder="Search log..." aria-label="Search log" />
        <span class="absolute right-3 top-1/2 -translate-y-1/2 text-[#923D8C]">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            <path d="M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16Z" stroke="currentColor" stroke-width="2" />
          </svg>
        </span>
      </div>

      <!-- Controls -->
      <div
        class="flex w-full flex-col gap-2 sm:flex-row sm:flex-wrap sm:items-center sm:justify-end lg:w-auto lg:flex-nowrap">
        <!-- pills row -->
        <div class="flex w-full flex-wrap items-center justify-start gap-2 sm:w-auto sm:justify-end">
          <!-- Last days -->
          <div class="relative w-full sm:w-auto">
            <select [(ngModel)]="range" (ngModelChange)="applyFilter()"
              class="h-[26px] w-full cursor-pointer appearance-none rounded-full border border-[#D1D5DB] bg-white px-3 pr-6 text-[10px] font-medium text-[#374151] outline-none sm:w-[92px]"
              aria-label="Last days">
              <option value="Last 7 days">Last 7 days</option>
              <option value="Last 30 days">Last 30 days</option>
              <option value="Last 90 days">Last 90 days</option>
            </select>
            <span class="pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-[#6B7280]">
              <svg width="10" height="10" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd"
                  d="M5.23 7.21a.75.75 0 0 1 1.06.02L10 10.94l3.71-3.71a.75.75 0 1 1 1.06 1.06l-4.24 4.24a.75.75 0 0 1-1.06 0L5.21 8.29a.75.75 0 0 1 .02-1.08Z"
                  clip-rule="evenodd" />
              </svg>
            </span>
          </div>



          <!-- Actions -->
          <div class="relative w-full sm:w-auto">
            <select [(ngModel)]="actionFilter" (ngModelChange)="applyFilter()"
              class="h-[26px] w-full cursor-pointer appearance-none rounded-full border border-[#D1D5DB] bg-white px-3 pr-6 text-[10px] font-medium text-[#374151] outline-none sm:w-[90px]"
              aria-label="Actions">
              <option value="All">Actions</option>
              <option value="Login attempt">Login attempt</option>
              <option value="Course update">Course update</option>
              <option value="Generate Certificate">Generate Certificate</option>
              <option value="Logout Successfully">Logout Successfully</option>
            </select>
            <span class="pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-[#6B7280]">
              <svg width="10" height="10" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd"
                  d="M5.23 7.21a.75.75 0 0 1 1.06.02L10 10.94l3.71-3.71a.75.75 0 1 1 1.06 1.06l-4.24 4.24a.75.75 0 0 1-1.06 0L5.21 8.29a.75.75 0 0 1 .02-1.08Z"
                  clip-rule="evenodd" />
              </svg>
            </span>
          </div>
        </div>

      </div>
    </div>

    <!-- Table -->
    <article class="mt-4 w-full overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm">
      <div class="w-full overflow-x-auto">
        <div class="min-w-[900px]">
          <!-- Header -->
          <div
            class="flex w-full items-center border-b border-gray-200 bg-gray-50 px-4 py-3 text-xs font-semibold uppercase tracking-wide text-gray-500">
            <div class="flex w-[60px] items-center gap-2">
              <input type="checkbox"
                class="h-4 w-4 cursor-pointer rounded border-gray-300 text-[#923D8C] focus:ring-[#923D8C]"
                [checked]="allOnPageSelected" (change)="toggleSelectAllOnPage($any($event.target).checked)"
                aria-label="Select all" />
            </div>

            <div class="flex flex-1 items-center">
              <div class="flex w-full items-center">
                <div class="flex w-[80px]">S.No</div>
                <div class="flex w-[200px]">Timestamp</div>
                <div class="flex w-[180px]">User</div>
                <div class="flex w-[180px]">Action</div>
                <div class="flex flex-1">Description</div>
              </div>
            </div>
          </div>

          <!-- Rows -->
          <div class="max-h-[500px] w-full overflow-y-auto bg-white">
            <div *ngFor="let r of pagedRows; trackBy: trackById"
              class="flex w-full items-center border-b border-gray-100 px-4 py-3 text-sm text-gray-700 transition-colors hover:bg-gray-50 even:bg-gray-50/50">

              <!-- Checkbox -->
              <div class="flex w-[60px] items-center">
                <input type="checkbox"
                  class="h-4 w-4 cursor-pointer rounded border-gray-300 text-[#923D8C] focus:ring-[#923D8C]"
                  [(ngModel)]="r.selected" [attr.aria-label]="'Select row ' + r.sn" />
              </div>

              <!-- Data -->
              <div class="flex flex-1 items-center">
                <div class="flex w-full items-center">
                  <!-- S.No -->
                  <div class="flex w-[80px] font-medium text-gray-500">{{ r.sn }}</div>

                  <!-- Timestamp -->
                  <div class="flex w-[200px] text-xs text-gray-500">{{ r.timestamp }}</div>

                  <!-- User -->
                  <div class="flex w-[180px] pr-4">
                    <span class="truncate" [title]="r.user">{{ r.user }}</span>
                  </div>

                  <!-- Action (Badge) -->
                  <div class="flex w-[180px]">
                    <span
                      class="inline-flex items-center rounded-full bg-blue-50 px-2.5 py-0.5 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-600/20">
                      {{ r.action }}
                    </span>
                  </div>

                  <!-- Description -->
                  <div class="flex flex-1 pr-4">
                    <span class="truncate" [title]="r.description">{{ r.description }}</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Empty State -->
            <div *ngIf="pagedRows.length === 0" class="flex flex-col items-center justify-center py-12 text-center">
              <div class="flex h-12 w-12 items-center justify-center rounded-full bg-gray-100">
                <svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
              <h3 class="mt-2 text-sm font-medium text-gray-900">No records found</h3>
              <p class="mt-1 text-sm text-gray-500">Try adjusting your search or filters.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Pagination -->
      <div class="flex items-center justify-between border-t border-gray-200 bg-gray-50 px-4 py-3 sm:px-6">
        <div class="text-sm text-gray-700">
          Showing page <span class="font-medium">{{ page }}</span> of <span class="font-medium">{{ totalPages }}</span>
        </div>
        <div class="flex gap-2">
          <button type="button"
            class="rounded-md border border-gray-300 bg-white px-3 py-1 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none disabled:opacity-50"
            (click)="prevPage()" [disabled]="page <= 1">
            Previous
          </button>
          <button type="button"
            class="rounded-md bg-[#923D8C] px-3 py-1 text-sm font-medium text-white shadow-sm hover:bg-[#7e3479] focus:outline-none disabled:opacity-50"
            (click)="nextPage()" [disabled]="page >= totalPages">
            Next
          </button>
        </div>
      </div>
    </article>
  </div>
</section>