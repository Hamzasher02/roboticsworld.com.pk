<main class="min-h-screen bg-gray-50">
  <div class="mx-auto w-full max-w-6xl px-4 py-5">
    <!-- TOP HEADER (My Profile + blue strip + Save Changes) -->
    <div class="rounded-md border border-gray-200 bg-white shadow-sm">
      <div class="px-4 pt-3">
        <h2 class="text-sm font-semibold text-gray-900">My Profile</h2>
      </div>

      <div class="px-4 pb-4 pt-3">
        <div class="flex items-center justify-between rounded-md bg-[#089BC412] px-4 py-3">
          <div class="flex items-center gap-3">
            <img class="h-10 w-10 rounded-full object-cover" [src]="user.avatar" alt="avatar" />
            <div class="leading-tight">
              <div class="text-sm font-semibold text-gray-800">{{ user.name }}</div>
              <div class="text-[11px] font-medium text-gray-500">{{ user.id }}</div>
            </div>
          </div>

          <button type="button" (click)="saveChanges()"
            class="rounded-full bg-cyan-600 px-5 py-1.5 text-xs font-semibold text-white hover:bg-cyan-700">
            Save Changes
          </button>
        </div>
      </div>
    </div>

    <!-- Page Title: Edit Profile -->
    <div class="mx-auto mt-6 w-full max-w-3xl">
      <div class="flex items-center gap-2 px-2">
        <img src="/assets/instructor-images/profile/basil_edit-solid.svg" class="h-4 w-4" alt="edit" />
        <h3 class="text-lg font-semibold text-gray-900">Edit Profile</h3>
      </div>

      <!-- PERSONAL INFORMATION -->
      <section class="mt-4 rounded-2xl border border-gray-200 bg-rose-50/40 p-6 shadow-sm">
        <div class="mb-5 flex items-center gap-2">
          <img src="/assets/instructor-images/profile/Vector.svg" class="h-4 w-4" alt="user" />
          <h4 class="text-sm font-semibold text-gray-900">Personal Information</h4>
        </div>

        <!-- Upload profile picture -->
        <div class="mb-6 flex flex-col items-center justify-center">
          <div class="relative">
            <div class="flex h-24 w-24 items-center justify-center rounded-full bg-[#089BC414]">
              <img src="/assets/instructor-images/profile/edit.svg" class="h-9 w-9 opacity-80" alt="user" />
            </div>

            <label
              class="absolute -bottom-1 -right-1 flex h-8 w-8 cursor-pointer items-center justify-center rounded-full bg-cyan-600 shadow-sm"
              title="Upload">
              <img src="/assets/instructor-images/profile/arrow.svg" class="h-4 w-4" alt="upload" />
              <input type="file" class="hidden" (change)="onAvatarSelected($event)" />
            </label>
          </div>

          <p class="mt-3 text-sm font-medium text-gray-600">Upload Profile Picture</p>
        </div>

        <!-- Inputs (3 cols like screenshot) -->
        <div class="grid grid-cols-1 gap-5 md:grid-cols-3">
          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">First Name*</label>
            <input [(ngModel)]="personal.firstName"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="Enter First Name" />
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Last Name*</label>
            <input [(ngModel)]="personal.lastName"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="Enter Last Name" />
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Father Name*</label>
            <input [(ngModel)]="personal.fatherName"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="Enter Father’s Name" />
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Email*</label>
            <input [(ngModel)]="personal.email" disabled
              class="h-10 w-full rounded-lg border border-gray-200 bg-gray-200 px-3 text-sm text-gray-700 outline-none" />
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Phone No*</label>
            <input [(ngModel)]="personal.phone"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="Enter phone no" />
          </div>
          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Date of Birth*</label>

            <div class="flex items-center">
              <input type="date" [(ngModel)]="personal.dob"
                class="h-9 w-[180px] sm:w-[200px] rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500" />
            </div>
          </div>



          <div class="md:col-span-3">
            <label class="mb-1 block text-xs font-semibold text-gray-700">Bio*</label>
            <textarea [(ngModel)]="personal.bio" rows="4"
              class="w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 py-2 text-sm outline-none focus:border-cyan-500"
              placeholder="Type here.."></textarea>
          </div>
        </div>
      </section>

      <!-- RESIDENCE INFORMATION -->
      <section class="mt-5 rounded-2xl border border-gray-200 bg-rose-50/40 p-6 shadow-sm">
        <div class="mb-4 flex items-center gap-2">
          <img src="/assets/instructor-images/profile/location.svg" class="h-4 w-4" alt="location" />
          <h4 class="text-sm font-semibold text-gray-900">Residence Information</h4>
        </div>

        <div class="grid grid-cols-1 gap-5 md:grid-cols-3">
          <div class="md:col-span-3">
            <label class="mb-1 block text-xs font-semibold text-gray-700">Address*</label>
            <input [(ngModel)]="residence.address"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="Street address" />
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">City*</label>
            <input [(ngModel)]="residence.city"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="Enter City Name" />
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Country*</label>
            <select [(ngModel)]="residence.country"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500">
              <option value="" selected>Select Country</option>
              <option value="PK">Pakistan</option>
              <option value="AE">UAE</option>
              <option value="US">USA</option>
              <option value="IN">India</option>
              <option value="GB">United Kingdom</option>
              <option value="CA">Canada</option>
              <option value="AU">Australia</option>
              <option value="SA">Saudi Arabia</option>
            </select>
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Postal Code*</label>
            <input [(ngModel)]="residence.postalCode"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="12345" />
          </div>
        </div>
      </section>

      <!-- EMERGENCY CONTACTS -->
      <section class="mt-5 rounded-2xl border border-gray-200 bg-rose-50/40 p-6 shadow-sm">
        <div class="mb-4 flex items-center gap-2">
          <img src="/assets/instructor-images/profile/contact.svg" class="h-4 w-4" alt="users" />
          <h4 class="text-sm font-semibold text-gray-900">Emergency Contacts</h4>
        </div>

        <div class="grid grid-cols-1 gap-5 md:grid-cols-3">
          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Full Name*</label>
            <input [(ngModel)]="emergency.fullName"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="Enter Name" />
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Relationship*</label>
            <select [(ngModel)]="emergency.relationship"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500">
              <option value="" selected>Select relationship</option>
              <option>Father</option>
              <option>Mother</option>
              <option>Brother</option>
              <option>Sister</option>
            </select>
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Phone No*</label>
            <input [(ngModel)]="emergency.phone"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="+9231778391" />
          </div>
        </div>
      </section>

      <!-- ACADEMIC DETAILS -->
      <section class="mt-5 rounded-2xl border border-gray-200 bg-rose-50/40 p-6 shadow-sm">
        <div class="mb-4 flex items-center gap-2">
          <img src="/assets/instructor-images/profile/cap.svg" class="h-4 w-4" alt="cap" />
          <h4 class="text-sm font-semibold text-gray-900">Academic Details</h4>
        </div>

        <div class="grid grid-cols-1 gap-5 md:grid-cols-3">
          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Qualification*</label>
            <select [(ngModel)]="academic.qualification"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500">
              <option value="" selected>Select qualification</option>
              <option>Ph.D.</option>
              <option>Masters</option>
              <option>Bachelors</option>
            </select>
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Degree Title*</label>
            <input [(ngModel)]="academic.degreeTitle"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="e.g., Computer Science" />
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Graduation Year*</label>
            <div class="relative">
              <input [(ngModel)]="academic.graduationYear"
                class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 pr-10 text-sm outline-none focus:border-cyan-500"
                placeholder="Enter year" />
              <img src="/assets/instructor-images/profile/dateofbirth.svg"
                class="absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 opacity-80" alt="calendar" />
            </div>
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Total CGPA/Marks</label>
            <input [(ngModel)]="academic.totalCgpa"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="e.g., 4.00 / 1100" />
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Obtained CGPA/Marks*</label>
            <input [(ngModel)]="academic.obtainedCgpa"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="e.g., 3.23/880" />
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Institution*</label>
            <input [(ngModel)]="academic.institution"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="Enter institution" />
          </div>

          <!-- Upload Transcript Box -->
          <div class="md:col-span-3">
            <label class="mb-2 block text-xs font-semibold text-gray-700">Upload Transcript*</label>

            <label
              class="flex cursor-pointer flex-col items-center justify-center rounded-xl border border-cyan-200 bg-[#F9F6F6] px-4 py-10 text-center">
              <div class="flex h-14 w-14 items-center justify-center rounded-full bg-[#089BC414]">
                <img src="/assets/instructor-images/profile/upload.svg" class="h-9 w-9" alt="upload" />
              </div>

              <p class="mt-4 text-sm font-medium text-gray-600">
                Click to upload transcript
              </p>
              <p class="mt-1 text-xs text-gray-500">PDF up to 10MB</p>

              <p *ngIf="academic.transcriptName" class="mt-3 text-xs font-semibold text-gray-700">
                {{ academic.transcriptName }}
              </p>

              <input type="file" class="hidden" (change)="onTranscriptSelected($event)" />
            </label>
          </div>
        </div>
      </section>

      <!-- TEACHING COURSE PREFERENCES -->
      <section class="mt-5 rounded-2xl border border-gray-200 bg-[#F9F6F6] p-6 shadow-sm">
        <div class="mb-4 flex items-center gap-2">
          <img src="/assets/instructor-images/profile/lock.svg" class="h-4 w-4" alt="lock" />
          <h4 class="text-sm font-semibold text-gray-900">
            Teaching Course Preferences
          </h4>
        </div>

        <label class="mb-2 block text-xs font-semibold text-gray-700">
          Preferred Courses*
        </label>

        <!-- Loading state -->
        <div *ngIf="isCoursesLoading" class="mb-3 text-xs font-medium text-gray-500">
          Loading courses...
        </div>

        <!-- Dropdown with dynamic courses -->
        <div class="relative" *ngIf="!isCoursesLoading">
          <select [(ngModel)]="teaching.preferredCourse"
            class="h-10 w-full appearance-none rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 pr-10 text-sm outline-none focus:border-cyan-500">
            <option value="">Select from drop down</option>
            <option *ngFor="let course of allCourses" [value]="course._id" [disabled]="isCourseSelected(course._id)">
              {{ course.courseTitle }}
            </option>
          </select>

          <img src="/assets/instructor-images/profile/downarrow.svg"
            class="pointer-events-none absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 opacity-80" alt="down" />
        </div>

        <!-- CHIPS (show course names) -->
        <div *ngIf="teaching.items.length" class="mt-4 flex flex-wrap gap-3">
          <div *ngFor="let item of teaching.items; let i = index"
            class="flex items-center gap-3 rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 py-2 text-sm text-gray-800">
            <span>{{ item.name }}</span>

            <button type="button" (click)="removeCourse(i)"
              class="flex h-8 w-8 items-center justify-center rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300">
              ✕
            </button>
          </div>
        </div>

        <!-- Add Another -->
        <button type="button" (click)="addCourse()" [disabled]="!teaching.preferredCourse || teaching.items.length >= 5"
          class="mt-4 inline-flex items-center gap-2 rounded-lg bg-cyan-600 px-4 py-2 text-sm font-semibold text-white hover:bg-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed">
          <span class="text-lg leading-none">+</span>
          Add Another
        </button>

        <p class="mt-2 text-xs text-gray-500">
          You can add up to 5 courses you'd like to teach.
        </p>
      </section>

      <!-- ACCOUNT SECURITY -->
      <section class="mt-5 rounded-2xl border border-gray-200 bg-rose-50/40 p-6 shadow-sm">
        <div class="mb-4 flex items-center gap-2">
          <img src="/assets/instructor-images/profile/lock.svg" class="h-4 w-4" alt="lock" />
          <h4 class="text-sm font-semibold text-gray-900">Account Security</h4>
        </div>

        <div class="grid grid-cols-1 gap-5 md:grid-cols-2">
          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Password*</label>
            <input [(ngModel)]="security.password" type="password"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="Enter password" />
          </div>

          <div>
            <label class="mb-1 block text-xs font-semibold text-gray-700">Confirm Password*</label>
            <input [(ngModel)]="security.confirmPassword" type="password"
              class="h-10 w-full rounded-lg border border-cyan-200 bg-[#F9F6F6] px-3 text-sm outline-none focus:border-cyan-500"
              placeholder="Re-enter password" />
          </div>
        </div>
      </section>

      <!-- Bottom Save Bar -->
      <button type="button" (click)="saveChanges()"
        class="mt-6 w-full rounded-lg bg-cyan-600 py-3 text-sm font-semibold text-white hover:bg-cyan-700">
        Save Changes
      </button>
      <div *ngIf="saveError" class="mt-3 text-xs font-medium text-red-600">
        {{ saveError }}
      </div>

      <div *ngIf="saveSuccess" class="mt-3 text-xs font-medium text-green-600">
        {{ saveSuccess }}
      </div>

      <p class="mt-3 text-center text-sm text-gray-700">
        Already have an account?
        <a href="#" class="font-semibold text-cyan-600 hover:text-cyan-700">Login here</a>
      </p>
    </div>
  </div>



</main>